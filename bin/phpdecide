#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

use Symfony\Component\Console\Application;
use PhpDecide\CLI\ExplainCommand;
use PhpDecide\CLI\DecisionsLintCommand;

$version = 'dev';
try {
	if (class_exists(\Composer\InstalledVersions::class)) {
		$version = \Composer\InstalledVersions::getPrettyVersion('distvan/phpdecide')
			?? \Composer\InstalledVersions::getVersion('distvan/phpdecide')
			?? $version;
	}
} catch (\Throwable) {
	// Fall back to "dev" if Composer metadata is unavailable.
}

$application = new Application('PHP Decide', $version);

$application->addCommand(new ExplainCommand());
$application->addCommand(new DecisionsLintCommand());

$application->run();
